# 2018 Round H

-   Score : -
-   Rank : -

---

## A

- 我们将总方案数减去不可行方案数即可
- 构建一颗trie树，将输入的前缀串插入到trie，同时在最后的节点打上标记
- 遍历一遍trie即可得到不可行方案数，需要注意会爆int
- P.S. 事实上直接计算可行的方案数好像也不太麻烦(

## B

- 最多有$\lceil \frac{n}{2} \rceil$块墙被保留了
- 求出连续的最大和即可

## C

- 差点把容斥忘光了= =
  
- 令$f(k)$表示从$m$对人中选择$k$对，并勒令他们在一起的方案数
  
- 那么根据容斥，答案就是$\sum_{i=0}^m (-1)^if(i)$
  
- 简单计数一下，$f(k) = 2^k\binom{m}{k}(2n-k)!$
  
      
